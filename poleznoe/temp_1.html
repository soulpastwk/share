<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ NTP –∏ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –Ω–∞ Astra Linux –∏ –†–ï–î –û–°</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; background: #f9f9f9; }
        h2, h3, h4 { margin-top: 1em; }
        pre { background: #272822; color: #f8f8f2; padding: 10px; overflow-x: auto; border-radius: 5px; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        blockquote { background: #eee; padding: 10px; border-left: 5px solid #ccc; margin: 20px 0; }
        img.badge { vertical-align: middle; margin-right: 5px; }
        hr { border: none; border-top: 1px solid #ccc; margin: 2em 0; }
    </style>
</head>
<body>

<h1>‚è± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NTP –∏ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –Ω–∞ Astra Linux –∏ –†–ï–î –û–°</h1>

<p>
    <img class="badge" src="https://img.shields.io/badge/platform-Linux-lightgrey?style=flat-square&logo=linux" alt="Platform">
    <img class="badge" src="https://img.shields.io/badge/tested%20on-R%C4%80D%20OS%207.3%20|%208.0%20|%20Astra%20SE%201.7.5%20|%201.8-orange?style=flat-square" alt="Tested on">
    <img class="badge" src="https://img.shields.io/badge/service-NTP-blue?style=flat-square" alt="Service NTP">
    <img class="badge" src="https://img.shields.io/badge/sync-active-brightgreen?style=flat-square" alt="Sync Status">
    <img class="badge" src="https://img.shields.io/badge/timezone-Asia%2FYekaterinburg-yellow?style=flat-square" alt="Timezone">
</p>

<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ <strong>NTP</strong> –∏ —Å–º–µ–Ω—ã —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –¥–ª—è –∫–æ–Ω—Å–æ–ª–µ–π <strong>Astra Linux</strong> –∏ <strong>–†–ï–î –û–° (7.3/8.0)</strong>. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ—Ç–µ–π —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏.</p>

<hr>

<h2>üîß –û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è</h2>
<ul>
    <li>–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π NTP-—Å–µ—Ä–≤–µ—Ä: <code>192.168.10.100</code></li>
    <li>–†–∞–±–æ—Ç–∞–µ–º <strong>—Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª–∏</strong>, –±–µ–∑ GUI</li>
    <li>NTP —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç <strong>UTC-–≤—Ä–µ–º—è</strong>, —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏</li>
</ul>

<blockquote>
<p><strong>TIP:</strong> –ü–æ—Å–ª–µ —Å–º–µ–Ω—ã —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ NTP –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.</p>
</blockquote>

<hr>

<h2>üìå 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —Å–ª—É–∂–±—ã NTP</h2>
<pre><code>systemctl status systemd-timesyncd ntp chronyd 2>/dev/null | grep -E "Active:|Loaded:"
# –∏–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:
systemctl is-active systemd-timesyncd
systemctl is-active ntp
systemctl is-active chronyd
</code></pre>

<hr>

<h2>üêß 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NTP</h2>

<h3>Astra Linux (Debian-based)</h3>

<h4>‚úÖ systemd-timesyncd (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</h4>
<pre><code>sudo nano /etc/systemd/timesyncd.conf</code></pre>

<pre><code>[Time]
NTP=192.168.10.100
FallbackNTP=
</code></pre>

<p>FallbackNTP - –∑–∞–ø–æ–ª–Ω—è–µ–º –µ—Å–ª–∏ –µ—Å—Ç—å –≤—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π.</p>

<pre><code>sudo systemctl restart systemd-timesyncd
sudo systemctl enable systemd-timesyncd
timedatectl status
</code></pre>

<h4>‚úÖ chrony (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</h4>
<pre><code>sudo apt update
sudo apt install chrony
sudo nano /etc/chrony/chrony.conf
</code></pre>

<pre><code>server 192.168.10.100 iburst
# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥—Ä—É–≥–∏–µ server —Å—Ç—Ä–æ–∫–∏
</code></pre>

<pre><code>sudo systemctl restart chrony
sudo systemctl enable chrony
chronyc sources -v
chronyc tracking
</code></pre>

<h4>‚úÖ ntpd</h4>
<pre><code>sudo apt install ntp
sudo nano /etc/ntp.conf
</code></pre>

<pre><code>server 192.168.10.100 iburst
</code></pre>

<pre><code>sudo systemctl restart ntp
sudo systemctl enable ntp
ntpq -p
</code></pre>

<hr>

<h3>–†–ï–î –û–° (ALT Linux-based)</h3>

<h4>‚úÖ chrony</h4>
<pre><code>sudo apt-get update
sudo apt-get install chrony
sudo nano /etc/chrony.conf   # –∏–ª–∏ /etc/chrony/chrony.conf
</code></pre>

<pre><code>server 192.168.10.100 iburst
</code></pre>

<pre><code>sudo systemctl restart chronyd
sudo systemctl enable chronyd
chronyc sources -v
</code></pre>

<h4>‚úÖ ntpd</h4>
<pre><code>sudo apt-get install ntp
sudo nano /etc/ntp.conf
</code></pre>

<pre><code>server 192.168.10.100 iburst
</code></pre>

<pre><code>sudo systemctl restart ntpd
sudo systemctl enable ntpd
ntpq -p
</code></pre>

<hr>

<h2>üîê 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞</h2>
<pre><code># iptables
sudo iptables -A INPUT -p udp --dport 123 -j ACCEPT
</code></pre>

<blockquote>
<p><strong>IMPORTANT:</strong> –î–ª—è <code>nftables</code> –∏–ª–∏ <code>firewalld</code> –∫–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.</p>
</blockquote>

<hr>

<h2>üïí 4. –°–º–µ–Ω–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –Ω–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</h2>
<p>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: <code>Asia/Yekaterinburg</code></p>

<h4>‚úÖ –ß–µ—Ä–µ–∑ timedatectl</h4>
<pre><code>timedatectl          # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π
sudo timedatectl set-timezone Asia/Yekaterinburg
timedatectl          # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
date                 # –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
</code></pre>

<h4>‚úÖ –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É</h4>
<pre><code>sudo rm -f /etc/localtime
sudo ln -s /usr/share/zoneinfo/Asia/Yekaterinburg /etc/localtime
echo "Asia/Yekaterinburg" | sudo tee /etc/timezone  # Debian-based
</code></pre>

<hr>

<h2>üß™ 5. –ü—Ä–æ–≤–µ—Ä–∫–∞</h2>
<table>
    <tr>
        <th>–°–µ—Ä–≤–∏—Å</th>
        <th>–ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
    </tr>
    <tr>
        <td>chrony</td>
        <td><code>chronyc tracking</code></td>
        <td><img src="https://img.shields.io/badge/sync-active-brightgreen?style=flat-square" alt="Sync"></td>
    </tr>
    <tr>
        <td>ntpd</td>
        <td><code>ntpq -p</code></td>
        <td><img src="https://img.shields.io/badge/sync-active-brightgreen?style=flat-square" alt="Sync"></td>
    </tr>
    <tr>
        <td>systemd-timesyncd</td>
        <td><code>timedatectl status</code></td>
        <td><img src="https://img.shields.io/badge/sync-active-brightgreen?style=flat-square" alt="Sync"></td>
    </tr>
</table>

<hr>

<h2>‚ö° 6. –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Astra Linux + chrony + –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥)</h2>
<pre><code># 1. –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
sudo timedatectl set-timezone Asia/Yekaterinburg
echo "Asia/Yekaterinburg" | sudo tee /etc/timezone

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ chrony
echo "server 192.168.10.100 iburst" | sudo tee /etc/chrony/chrony.conf

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl restart chrony
sudo systemctl enable chrony

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞
timedatectl
chronyc tracking
date
</code></pre>

<hr>

<h2>üîñ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
<ul>
    <li><strong>Chrony</strong> ‚Äî —Ç–æ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω.</li>
    <li><strong>NTPD</strong> ‚Äî –∫–ª–∞—Å—Å–∏–∫–∞, –º–µ–Ω–µ–µ –≥–∏–±–∫–∏–π.</li>
    <li><strong>systemd-timesyncd</strong> ‚Äî –ø—Ä–æ—Å—Ç–æ–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –±–∞–∑–æ–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.</li>
</ul>

<blockquote>
<p><strong>INFO:</strong> –ü—Ä–∏–º–µ–Ω–∏–º–æ –¥–ª—è:</p>
<ul>
    <li>Astra SE 1.7.5 / 1.8</li>
    <li>–†–ï–î –û–° 7.3 / 8.0</li>
    <li>–û–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –¥—Ä—É–≥–∏—Ö Linux-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤.</li>
</ul>
</blockquote>

</body>
</html>
