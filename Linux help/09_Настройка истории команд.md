# üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥ Bash

[![Platform](https://img.shields.io/badge/platform-Linux-lightgrey?style=flat-square&logo=linux)]()
[![Category](https://img.shields.io/badge/category-Bash%20History-blue?style=flat-square)]()

Bash —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ —Ñ–∞–π–ª–µ `~/.bash_history`.  
–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ—ë —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```bash
history
````

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `~/.bashrc`.
–ß—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
source ~/.bashrc
```

---

## ‚ö° 1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä–∞ –∏ –∫–æ–º–∞–Ω–¥—ã.
–î–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –¥–æ–±–∞–≤—å—Ç–µ –≤ `~/.bashrc`:

```bash
export HISTTIMEFORMAT="%h %d %H:%M:%S "
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–æ–º–∞–Ω–¥–∞ `history` –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è:

```
113 Jun 08 16:31:06 sudo ifconfig
114 Jun 08 16:31:10 top
115 Jun 08 16:31:19 ping disnetern.ru
116 Jun 08 16:31:22 history
```

> [!TIP]
> `%h` ‚Äî –º–µ—Å—è—Ü, `%d` ‚Äî –¥–µ–Ω—å, `%H:%M:%S` ‚Äî —á–∞—Å—ã, –º–∏–Ω—É—Ç—ã –∏ —Å–µ–∫—É–Ω–¥—ã.
> –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä `"%Y-%m-%d %H:%M:%S "`.

---

## üõ† 2. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏

Bash –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ö—Ä–∞–Ω–∏—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ (–æ–±—ã—á–Ω–æ 500).
–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–∞–Ω–¥ –≤ –ø–∞–º—è—Ç–∏ –∏ –≤ —Ñ–∞–π–ª–µ –∏—Å—Ç–æ—Ä–∏–∏, –¥–æ–±–∞–≤—å—Ç–µ –≤ `~/.bashrc`:

```bash
export HISTSIZE=5000       # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ –≤ –ø–∞–º—è—Ç–∏
export HISTFILESIZE=5000   # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–π–ª–µ ~/.bash_history
```

> [!TIP]
> –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π.

---

## üß© 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ —Ñ–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Bash –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `~/.bash_history` –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Å–µ—Å—Å–∏–∏.
–ß—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ —Ñ–∞–π–ª, –∞ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ –µ–≥–æ, –≤–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é `histappend`:

```bash
shopt -s histappend
```

> [!IMPORTANT]
> –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ç–µ—Ä—é –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏—è—Ö.

---

## ‚è± 4. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏.
–ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –≤–Ω–µ–∑–∞–ø–Ω–æ –æ–±–æ—Ä–≤–µ—Ç—Å—è, —Ç–µ–∫—É—â–∞—è –∏—Å—Ç–æ—Ä–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω–∞.

–ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `$PROMPT_COMMAND`:

### –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –±—ã–ª–∞ –∑–∞–¥–∞–Ω–∞ —Ä–∞–Ω–µ–µ:

```bash
PROMPT_COMMAND='history -a'
```

### –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ:

```bash
PROMPT_COMMAND='$PROMPT_COMMAND; history -a'
```

* `history -a` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –≤ —Ñ–∞–π–ª `~/.bash_history` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
* –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –≤ `$PROMPT_COMMAND`, –Ω–∞–ø—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–æ–π –∏–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

---

## üîç 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `history | grep <–∫–æ–º–∞–Ω–¥–∞>` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏.
* –î–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
history -w
```

* –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞ –≤ —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é:

```bash
history -r
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `HISTCONTROL=ignoredups:erasedups` –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∫–æ–º–∞–Ω–¥:

```bash
export HISTCONTROL=ignoredups:erasedups
```

> [!TIP]
> –°–æ—á–µ—Ç–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é Bash –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –µ—ë –ø–æ—Ç–µ—Ä–∏ –ø—Ä–∏ –∞–≤–∞—Ä–∏–π–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

