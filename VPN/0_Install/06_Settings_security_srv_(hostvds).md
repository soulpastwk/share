# ๐ ะะพัะพะฒัะน ะผะธะฝะธะผะฐะปัะฝัะน ะบะพะฝัะธะณ `sysctl.conf`, ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะน ะฟะพะด **VPN-ัะตัะฒะตั** <br>
# ะะพะฟะพะปะฝะตะฝะธะต ะบะพ ะฒัะตะผ ะฝะฐัััะพะนะบะฐะผ - ะบะพะฝัะปะธะบัะฐ ะฝะต ะฑัะดะตั <br>
## ๐ ะฟัะธะผะตะฝะธะผะพ ะดะปั hostvds ๐ <br>
## ๐ ะฟัะธะผะตะฝะธะผะพ ะดะปั hostkey ๐ <br>


```conf
# ==========================
# ๐ ะะตะทะพะฟะฐัะฝะพััั ัะตัะธ
# ==========================

# ะัะบะปััะฐะตะผ IPv6 ะฟะพะปะฝะพัััั (ะธัะบะปััะฐะตะผ ััะตัะบะธ DNS ะธ ะฐะดัะตัะฐัะธั)
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1

# ะัะบะปััะฐะตะผ ะผะฐัััััะธะทะฐัะธั IPv6
net.ipv6.conf.all.forwarding = 0

# ะะณะฝะพัะธััะตะผ ะฒัะต ะฒัะพะดััะธะต ICMP (ัะตัะฒะตั ะฝะต ะฟะธะฝะณัะตััั)
net.ipv4.icmp_echo_ignore_all = 1
# ะะณะฝะพัะธััะตะผ ัะธัะพะบะพะฒะตัะฐัะตะปัะฝัะต ะทะฐะฟัะพัั (DoS-ะทะฐัะธัะฐ)
net.ipv4.icmp_echo_ignore_broadcasts = 1
# ะะณะฝะพัะธััะตะผ ะปะพะถะฝัะต ICMP ะพัะธะฑะบะธ
net.ipv4.icmp_ignore_bogus_error_responses = 1

# ==========================
# โก ะะฟัะธะผะธะทะฐัะธั ัะบะพัะพััะธ
# ==========================

# ะะปะฐะฝะธัะพะฒัะธะบ ะฟะฐะบะตัะพะฒ (ะฝัะถะตะฝ ะดะปั BBR)
net.core.default_qdisc = fq

# ะะปะณะพัะธัะผ TCP congestion control โ BBR
net.ipv4.tcp_congestion_control = bbr

# ==========================
# ๐ก ะะพะฟะพะปะฝะธัะตะปัะฝะพ
# ==========================

# ะะบะปััะฐะตะผ ัะพัะฒะฐัะดะธะฝะณ IPv4 (ะพะฑัะทะฐัะตะปัะฝะพ ะดะปั VPN)
net.ipv4.ip_forward = 1
````

---

## ๐ ะะฐะบ ะฟัะธะผะตะฝะธัั

1. ะกะพะทะดะฐะน ัะฐะนะป ั ะฝะฐัััะพะนะบะฐะผะธ:

```bash
sudo nano /etc/sysctl.d/99-vpn.conf
```

2. ะััะฐะฒั ััะดะฐ ัะพะดะตัะถะธะผะพะต ะบะพะฝัะธะณะฐ.

3. ะัะธะผะตะฝะธัั ะฝะฐัััะพะนะบะธ:

```bash
sudo sysctl --system
```

4. ะัะพะฒะตัะบะฐ ัะฐะฑะพัั:

* IPv6 ะพัะบะปัััะฝ?

```bash
ip a | grep inet6
```

* ะะบะปัััะฝ ะปะธ BBR?

```bash
sysctl net.ipv4.tcp_congestion_control
```

* ะะฐะทัะตััะฝ ะปะธ ัะพัะฒะฐัะดะธะฝะณ IPv4?

```bash
sysctl net.ipv4.ip_forward
```

---
## ะะตะบะพะผะตะฝะดัั ะตัั ะดะพะฑะฐะฒะธัั ััะธ ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะฝัะธะณะธ ะฝะธะถะต:

## ๐ ะัะบะปััะตะฝะธะต IPv6 ะฒ ัะฐะผะพะผ GRUB ะธ ะทะฐัะธัะฐ ะพั ICMP

```bash
echo "GRUB_CMDLINE_LINUX=\"ipv6.disable=1\"" | tee -a /etc/default/grub
update-grub
reboot
```
---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะทะฐัะธัะฐ ICMP

```bash
# ะะพะฑะฐะฒะปัะตะผ ะฟะฐัะฐะผะตััั ะฒ /etc/sysctl.conf
echo "net.ipv4.icmp_echo_ignore_all = 1" >> /etc/sysctl.conf
echo "net.ipv4.icmp_echo_ignore_broadcasts = 1" >> /etc/sysctl.conf
echo "net.ipv4.icmp_ignore_bogus_error_responses = 1" >> /etc/sysctl.conf

# ะัะธะผะตะฝัะตะผ ะธะทะผะตะฝะตะฝะธั
sysctl -p
```

๐ ะขะฐะบะพะน ะบะพะฝัะธะณ ะฟะพะดัะพะดะธั ะธะผะตะฝะฝะพ ะดะปั **VPN-ัะตัะฒะตัะฐ**:

* IPv6 ะณะปััะธะผ (ะฝะตั ััะตัะตะบ DNS/ััะฐัะธะบะฐ),
* IPv4 ัะพัะฒะฐัะดะธะผ (ะฝัะถะฝะพ ะดะปั ัะฐะฑะพัั VPN),
* BBR ะฒะบะปัััะฝ (ััะบะพััะตั ัะพะตะดะธะฝะตะฝะธั),
* ICMP-ะทะฐะฟัะพัั ะทะฐะบัััั (ัะตัะฒะตั ะฝะต ยซัะฒะตัะธัััยป ะฒ ัะตัะธ).
