# ‚ö°Ô∏è Fixing Ubuntu Network Interface (/32 ‚Üí /24 Hybrid Mode)

–ö–æ–≥–¥–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤—ã–¥–∞—ë—Ç IP —Å –º–∞—Å–∫–æ–π **/32**, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å–µ—Ç–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤. –†–µ—à–µ–Ω–∏–µ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —Å –º–∞—Å–∫–æ–π **/24**,
—Å–æ—Ö—Ä–∞–Ω–∏–≤ –ø—Ä–∏ —ç—Ç–æ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `/32` –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –∏ —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

---

## üöÄ –†–µ—à–µ–Ω–∏–µ

### üìÇ –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç–∫—Ä–æ–π `/etc/network/interfaces` –∏ –ø—Ä–æ–ø–∏—à–∏ —Å–ª–µ–¥—É—é—â–µ–µ:

```ini
# Loopback
auto lo
iface lo inet loopback

# –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
auto ens3
iface ens3 inet static
    address 145.55.44.33
    netmask 255.255.255.255
    gateway 10.0.0.1
    dns-nameservers 30.50.90.50

    # –ì–∏–±—Ä–∏–¥ /32 + /24
    post-up ip addr add 145.55.44.33/24 dev ens3
    post-up ip route add default via 10.0.0.1 dev ens3
    pre-down ip addr del 145.55.44.33/24 dev ens3
    pre-down ip route del default via 10.0.0.1 dev ens3
```

> ‚ö†Ô∏è –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ: `/32` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π IP –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, `/24` ‚Äî –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤.

---

## üõ† –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª –∏ –ø—Ä–∏–º–µ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
ifdown ens3 && ifup ens3
```

> ‚ö†Ô∏è –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—à—å –ø–æ SSH, –ª—É—á—à–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `reboot`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ–±—Ä—ã–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

```bash
ip -c -br a
```

–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```
lo    UNKNOWN  127.0.0.1/8
ens3  UP       145.55.44.33/32 145.55.44.33/24
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∞—Ä—à—Ä—É—Ç –¥–æ Google DNS:

```bash
traceroute 8.8.8.8
```

---

## üéØ –ò—Ç–æ–≥

* üü¢ –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º –ø–æ `/32`.
* üü¢ –î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ø–æ–¥—Å–µ—Ç—å `/24`.
* üü¢ –Ø–≤–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É VPN –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ç—Ä–∞—Ñ–∏–∫–∞.
* üü¢ –û—à–∏–±–æ–∫ `ifup/ifdown` –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç.

---

### üîπ –ü–æ—á–µ–º—É –≥–∏–±—Ä–∏–¥ –Ω—É–∂–µ–Ω?

* –°–µ—Ä–≤–µ—Ä –≤–∏–¥–∏—Ç —Å–µ–±—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ö–æ—Å—Ç –≤ `/24` –¥–ª—è –û–° –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
* VPN –∏ —Å–µ—Ä–≤–∏—Å—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –º–∞—Ä—à—Ä—É—Ç –∏ IP.
* –¢–µ—Å—Ç—ã –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π fingerprint.

---

## ‚ùì FAQ

### üîπ –ü–æ—á–µ–º—É —É –º–µ–Ω—è IP —Å –º–∞—Å–∫–æ–π `/32`?

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤—ã–¥–µ–ª—è—é—Ç –∞–¥—Ä–µ—Å–∞ —Ç–∞–∫, —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä –≤–∏–¥–µ–ª —Ç–æ–ª—å–∫–æ **—Å–≤–æ–π –æ–¥–∏–Ω IP**,
–∞ –¥–æ—Å—Ç—É–ø –∫ —à–ª—é–∑—É (`gateway`) –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–æ–º. –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç IP-–ø—É–ª—ã –∏ —É–ø—Ä–æ—â–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.

---

### üîπ –ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å `/32`?

* –°–µ—Ä–≤–µ—Ä ¬´–Ω–µ –∑–Ω–∞–µ—Ç¬ª –æ —Å–≤–æ–µ–π –ø–æ–¥—Å–µ—Ç–∏, –¥—É–º–∞–µ—Ç —á—Ç–æ –æ–Ω –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω.
* –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ VPN –º–æ–≥—É—Ç –ø–∞–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.
* –°–µ—Ç–µ–≤—ã–µ —Ç–µ—Å—Ç—ã (–∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏) —á–∞—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç ¬´–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ¬ª –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

---

### üîπ –ß—Ç–æ –¥–∞—ë—Ç –≥–∏–±—Ä–∏–¥ `/32 + /24`?

* –î–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤—Å—ë –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –±—ã–ª–æ ‚Äî `/32`.
* –î–ª—è –û–° –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ö–æ—Å—Ç –≤ —Å–µ—Ç–∏ `/24`.
* –ü—Ä–æ–±–ª–µ–º—ã —Å VPN-—Ñ–∏–Ω–≥–µ—Ä–ø—Ä–∏–Ω—Ç–æ–º, DNS –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π –∏—Å—á–µ–∑–∞—é—Ç.

---

### üîπ –ê –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è—Ç—å?

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.
–ù–æ:

* –ß–∞—Å—Ç—å —Å–∞–π—Ç–æ–≤/—Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–µ—Ç ¬´–ø–∞–ª–∏—Ç—å¬ª –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–µ—Ç–∞–ø.
* –ò–Ω–æ–≥–¥–∞ –ª–æ–º–∞–µ—Ç—Å—è MTU/PMTU.
* –°–ª–æ–∂–Ω–µ–µ –¥–µ–±–∞–∂–∏—Ç—å VPN, DNS –∏ firewall.

---

‚ú® –¢–µ–ø–µ—Ä—å —Ç–≤–æ–π —Å–µ—Ä–≤–µ—Ä ¬´–Ω–µ –ø–∞–ª–∏—Ç—Å—è¬ª –∫–∞–∫ \`/32 only host¬ª –∏ –¥—Ä—É–∂–∏—Ç –∏ —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º, –∏ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏.

## –ù–æ —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤–æ—Ç –ø–æ—á–µ–º—É: 

–ù–∏–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ, **–∫–∞–∫ TCP/UDP –ø–∞–∫–µ—Ç—ã –∏ LZO —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–¥—É—Ç —Å–µ–±—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å /32 ‚Üí /24 hybrid –∏ –∫–∞–∫ —ç—Ç–æ –¥–∞—ë—Ç ¬´—Å–ª–µ–¥—ã¬ª VPN** –¥–ª—è fingerprint —Å–∞–π—Ç–æ–≤.

---

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞: TCP/UDP + LZO –≤ /32 ‚Üí /24 vs –ù–∞—Ç–∏–≤–Ω–∞—è /24

```
–°—Ü–µ–Ω–∞—Ä–∏–π 1: /32 ‚Üí /24 Hybrid Mode
----------------------------------

[–°–µ—Ä–≤–µ—Ä 195.133.64.92/32 + /24]
   |
   |  1) VPN-—Ç—É–Ω–Ω–µ–ª—å: OpenVPN UDP/TCP
   |  2) –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: AES-256, MAC: SHA1
   |  3) LZO compression
   |
   v
[Linux kernel / hybrid routing]
   |
   |  - –û—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç —á–µ—Ä–µ–∑ /32
   |  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç —á–µ—Ä–µ–∑ /24
   |  - TTL/MTU –º–æ–∂–µ—Ç —Å–ª–µ–≥–∫–∞ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
   |
   v
[–ü—Ä–æ–≤–∞–π–¥–µ—Ä—Å–∫–∏–π gateway]
   |
   |  - NAT / –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è
   |  - TCP handshake –∏ —Å–µ–≥–º–µ–Ω—Ç—ã LZO —Å–ª–µ–≥–∫–∞ –≤–∏–¥–æ–∏–∑–º–µ–Ω–µ–Ω—ã
   |
   v
[–ò–Ω—Ç–µ—Ä–Ω–µ—Ç]
   |
   |  - Fingerprint-—Å–∞–π—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:
   |     * TLS/UDP handshake
   |     * LZO compression patterns
   |     * TTL –∏ MSS
   |
   v
VPN fingerprint DETECTED (OpenVPN, AES, LZO)


–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–∞—Ç–∏–≤–Ω–∞—è /24 —Å–µ—Ç—å
------------------------------

[–°–µ—Ä–≤–µ—Ä 195.133.64.92/24]
   |
   |  1) VPN-—Ç—É–Ω–Ω–µ–ª—å: OpenVPN UDP/TCP
   |  2) –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: AES-256, MAC: SHA1
   |  3) LZO compression
   |
   v
[Linux kernel / native routing]
   |
   |  - –û—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π
   |  - TTL/MTU —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ
   |
   v
[–ü—Ä–æ–≤–∞–π–¥–µ—Ä—Å–∫–∏–π gateway]
   |
   |  - NAT / –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è
   |  - TCP handshake –∏ LZO —Å–µ–≥–º–µ–Ω—Ç—ã –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
   |
   v
[–ò–Ω—Ç–µ—Ä–Ω–µ—Ç]
   |
   |  - Fingerprint-—Å–∞–π—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:
   |     * TLS/UDP handshake
   |     * LZO compression patterns
   |     * TTL –∏ MSS
   |
   v
VPN fingerprint NOT detected
```

---

### üîπ –ü–æ—á–µ–º—É hybrid /32 –¥–∞—ë—Ç ¬´—Å–ª–µ–¥¬ª

1. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ—á–µ—á–Ω—ã–π /32**

   * Linux –¥–µ–ª–∞–µ—Ç ¬´–æ–±—Ö–æ–¥–Ω–æ–π¬ª –º–∞—Ä—à—Ä—É—Ç —á–µ—Ä–µ–∑ /24 ‚Üí TTL, MSS –∏ –ø–∞–∫–µ—Ç—ã LZO –º–æ–≥—É—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.
2. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä –≤–∏–¥–∏—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç**

   * Gateway –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é ¬´–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç¬ª –ø–∞–∫–µ—Ç—ã ‚Üí –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ OpenVPN –æ—Å—Ç–∞—é—Ç—Å—è.
3. **Fingerprint —Å–∞–π—Ç—ã —Ñ–∏–∫—Å–∏—Ä—É—é—Ç**

   * –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç TCP handshake, LZO, TTL, —Ä–∞–∑–º–µ—Ä—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤ ‚Üí –≤–∏–¥—è—Ç ¬´—Ç–∏–ø–∏—á–Ω—ã–π OpenVPN –ø–∞–∫–µ—Ç¬ª.

---

### üîπ –ü–æ—á–µ–º—É –Ω–∞—Ç–∏–≤–Ω–∞—è /24 ¬´—Å–∫—Ä—ã–≤–∞–µ—Ç¬ª VPN

* –ú–∞—Ä—à—Ä—É—Ç—ã –∏ TCP/IP —Å—Ç–µ–∫ ¬´—Ä–æ–≤–Ω—ã–µ¬ª.
* –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –≤–Ω–æ—Å–∏—Ç –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Üí handshake –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π TCP/TLS –ø–æ—Ç–æ–∫.
* Fingerprint-—Å–∞–π—Ç—ã –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ OpenVPN.

---

üí° **–í—ã–≤–æ–¥**

* Hybrid mode /32 ‚Üí /24 —Ä–µ—à–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∏ —Ä–∞–±–æ—Ç—É VPN, –Ω–æ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å —à–∞–Ω—Å, —á—Ç–æ fingerprint ¬´—Å–≤–µ—Ç–∏—Ç—Å—è¬ª –∏–∑-–∑–∞ –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.
* –ß—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç—å VPN, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **TLS/HTTPS-—Ç—É–Ω–Ω–µ–ª—å** (VLESS/WSS) –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä —Å **–Ω–∞—Ç–∏–≤–Ω–æ–π /24** —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.


