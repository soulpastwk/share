# Установка и настройка VPN-сервера 

## План установки
Ниже приведены инструкции по установке и настройке VPN-сервера. Настройки актуальны для хостинга [my.hshp.host](https://my.hshp.host) и других аналогичных сервисов.

> **Важно!** Рекомендуется использовать Ubuntu 24. Если её нет в списке доступных версий, выберите самую последнюю и обновитесь до 24 версии.

---

### Исправление ошибки `debconf: unable to initialize frontend: Dialog`

Эта ошибка возникает, когда система пытается использовать графический интерфейс для настройки пакетов, но соответствующая программа не установлена. Это часто происходит на серверах или в минимальных системах.

#### Вариант 1: Установить `dialog`
```bash
sudo apt update
sudo apt install -y dialog
```

#### Вариант 2: Отключить диалоги
```bash
echo 'debconf debconf/frontend select noninteractive' | sudo debconf-set-selections
```

---

### Обновление системы и установка необходимых пакетов
```bash
apt update && apt upgrade -y
apt install curl -y
```

---

### Установка 3X-UI
Используйте следующий скрипт для автоматической установки:
```bash
bash <(curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh)
```

После запуска скрипта:
1. Подтвердите установку, введя `Y`.
2. Укажите порт (рекомендуется выбрать значение в диапазоне **60000-65000**).
3. Запомните логин, пароль и адрес панели, которые будут показаны после завершения установки.

![Скриншот завершения установки](https://imgur.com/uS0RGsW.png)

---

### Настройка панели управления
Откройте браузер и перейдите по адресу:
```
http://xxx.xxx.xxx.xxx:port/panel/
```
Где:
- `xxx.xxx.xxx.xxx` — IP-адрес вашего сервера.
- `port` — номер порта, указанный при установке.
- `panel` — случайный набор букв и цифр.

![Панель управления](https://imgur.com/ZHetcHl.png)

1. Выберите русский язык.
2. Смените тему (по желанию).
3. Измените логин и пароль.
4. При необходимости измените путь к панели и порт.

![Настройка панели](https://imgur.com/RscRIsd.png)
![Дополнительные настройки](https://imgur.com/OLtUftt.png)

---

### Создание подключения
1. Перейдите в раздел **Подключения** и нажмите **Добавить подключение**.
2. Настройте VLESS с XTLS-Reality:

   ![Добавление подключения](https://imgur.com/LGrjUuq.png)
   ![Настройка VLESS](https://imgur.com/OQj9B9T.png)

   **Параметры настройки:**
   - **Примечание:** Любое название.
   - **Протокол:** `vless`.
   - **Порт IP:** Оставить пустым.
   - **Порт:** `443`.
   - **Протокол передачи:** `TCP (RAW)`.
   - **AcceptProxyProtocol, HTTP Маскировка, Transparent Proxy, TLS:** ВЫключено.
   - **Безопасность:** `Reality`.
   - **xVer:** `0`.
   - **Reality:** Включено.
   - **XTLS:** Выключено.
   - **uTLS:** Выберите `chrome`.
   - **Dest:** `google.com:443`.
   - **Server names:** `google.com,www.google.com`.
   - **ShortIds:** Автоматическая генерация.
   - **Public Key, Private Key:** Нажмите **Get new keys**.
   - **Sniffing, HTTP, TLS, QUIC, fakedns:** Включено.

   ![Настройка Sniffing](https://imgur.com/KmwS6b4.png)

3. После настройки нажмите **Создать**.

---

### Настройка клиента
1. Перейдите в раздел **Клиенты**.
2. Отредактируйте созданного клиента:
   - **Email:** Название клиента (например, `dom PC user`).
   - **Flow:** Выберите `xtls-rprx-vision`.

   ![Настройка клиента](https://imgur.com/cZXQJeg.png)

3. Скопируйте конфигурацию клиента:
   - Перейдите в информацию о подключении.
   - Скопируйте значение из поля **URL**.

   ![Информация о подключении](https://imgur.com/0ufrQSQ.png)
   ![Копирование URL](https://imgur.com/TXwmUb3.png)

4. Вставьте конфигурацию в клиентское приложение. Для выбора клиентов перейдите по ссылке:
   [Клиенты для Windows, Android, iOS, macOS, Linux](https://itdog.info/klienty-windows-android-ios-macos-linux-dlya-xray-sing-box-vless-shadowsocks-trojan-etc/).

---
